module.exports=[14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e(a){let{error:b}=a;if(d){let a=d.getStore();if((null==a?void 0:a.isRevalidate)||(null==a?void 0:a.isStaticGeneration))throw console.error(b),b}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(87924),e=a.r(51234),f={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}},g=function(a){let{error:b}=a,c=null==b?void 0:b.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:b}),(0,d.jsx)("div",{style:f.error,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:f.text,children:["Application error: a ",c?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",c?"server logs":"browser console"," for more information)."]}),c?(0,d.jsx)("p",{style:f.text,children:"Digest: "+c}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},88531,a=>{"use strict";a.s(["Link",()=>f,"useNavigate",()=>g,"useParams",()=>h]);var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(50944);let f=({to:a,...d})=>(0,b.jsx)(c.default,{href:a,...d}),g=()=>{let a=(0,e.useRouter)();return(0,d.useCallback)((b,c)=>{if("number"==typeof b)return void(b<0?a.back():a.refresh());c?.replace?a.replace(b,{scroll:c.scroll}):a.push(b,{scroll:c?.scroll})},[a])},h=()=>(0,e.useParams)()},42343,a=>{"use strict";a.s(["GenIcon",()=>i],42343);var b=a.i(72131),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=b.default.createContext&&b.default.createContext(c),e=["attr","size","title"];function f(){return(f=Object.assign.bind()).apply(this,arguments)}function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?g(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function i(a){return c=>b.default.createElement(j,f({attr:h({},a.attr)},c),function a(c){return c&&c.map((c,d)=>b.default.createElement(c.tag,h({key:d},c.attr),a(c.child)))}(a.child))}function j(a){var g=c=>{var d,{attr:g,size:i,title:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,e),l=i||c.size||"1em";return c.className&&(d=c.className),a.className&&(d=(d?d+" ":"")+a.className),b.default.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,g,k,{className:d,style:h(h({color:a.color||c.color},c.style),a.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),j&&b.default.createElement("title",null,j),a.children)};return void 0!==d?b.default.createElement(d.Consumer,null,a=>g(a)):g(c)}},50407,a=>{"use strict";a.s(["buildAuthServiceUrl",()=>f,"buildRestaurantServiceUrl",()=>e]);let b=a=>a.replace(/\/+$/,""),c=b("http://localhost:5002"),d=b("http://localhost:5001"),e=a=>{if(!a)return c;if(/^https?:\/\//i.test(a))return a;let b=a.startsWith("/")?a:`/${a}`;return`${c}${b}`},f=a=>{if(!a)return d;if(/^https?:\/\//i.test(a))return a;let b=a.startsWith("/")?a:`/${a}`;return`${d}${b}`}},88671,a=>{"use strict";a.s(["default",()=>i]);var b=a.i(87924),c=a.i(72131),d=a.i(88531),e=a.i(83490),f=a.i(56973),g=a.i(5327),h=a.i(50407);let i=()=>{let{cartItems:a}=(0,c.useContext)(g.CartContext),i=(0,d.useNavigate)(),[j,k]=(0,c.useState)({customerId:"",restaurantId:"",deliveryAddress:""}),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!0),x=(0,c.useMemo)(()=>null,[]),y=(0,c.useMemo)(()=>a.reduce((a,b)=>{let c="number"==typeof b.quantity&&b.quantity>0?Math.floor(b.quantity):1;return a+("number"==typeof b.price?b.price:Number.parseFloat(String(b.price??0))||0)*c},0),[a]),z=(0,c.useMemo)(()=>a.length>0?String(a[0].restaurantId??""):"",[a]);(0,c.useEffect)(()=>{let a=async()=>{if(!z)return void u("No Restaurant Selected");try{let a=await e.default.get((0,h.buildRestaurantServiceUrl)(`/api/restaurant/details/${z}`)),b=a.data?.restaurant;b?(u(String(b.name??"")),k(a=>({...a,restaurantId:String(b._id??"")}))):u("Unknown Restaurant")}catch(a){if(e.default.isAxiosError(a)&&a.response?.status===404)try{let a=await e.default.get((0,h.buildRestaurantServiceUrl)("/api/restaurant/all")),b=(a.data?.restaurants??[]).find(a=>String(a._id)===z);if(b){u(String(b.name??"")),k(a=>({...a,restaurantId:String(b._id??"")}));return}}catch(a){console.error("Fallback restaurant lookup failed",a)}else console.error("Error fetching restaurant details",a);u("Unknown Restaurant")}};(async()=>{w(!0);try{if(!x){s("No Token Found"),w(!1);return}let a=(a=>{if(!a)return null;try{let b=a.split(".");if(b.length<2)return null;let c=b[1]??"";for(c=c.replace(/-/g,"+").replace(/_/g,"/");c.length%4!=0;)c+="=";let d=atob(c);return JSON.parse(d)}catch(a){return console.error("Error decoding token payload",a),null}})(x)??{},b=a.id??a._id??a.userId??a.user_id??a.userID??a.sub,c=b?String(b):"",d=[(0,h.buildAuthServiceUrl)("/api/auth/customer/profile"),c?(0,h.buildAuthServiceUrl)(`/api/auth/customer/${c}`):null,c?(0,h.buildAuthServiceUrl)(`/api/customers/${c}`):null,c?(0,h.buildAuthServiceUrl)(`/api/auth/customers/${c}`):null,c?(0,h.buildAuthServiceUrl)(`/api/users/${c}`):null].filter(Boolean),f=null;for(let a of d)try{let b=await e.default.get(a,{headers:{Authorization:`Bearer ${x}`}});if(b?.data){f=b.data;break}}catch{continue}let g="";if(f){let a=f.data?.customer??f.customer??f,b=String(a.firstName??""),c=String(a.lastName??"");g=b||c?`${b} ${c}`.trim():String(a.name??"")||String(a.fullName??"")||String(a.username??"")||String(a.email??"")||"Customer"}if(!g){let b=String(a.firstName??""),d=String(a.lastName??"");g=b||d?`${b} ${d}`.trim():String(a.name??"")||String(a.username??"")||String(a.email??"")||(c?`Customer_${c.slice(0,8)}`:"Customer")}s(g),k(a=>({...a,customerId:c||""}))}catch(a){console.error("Error resolving customer name",a),s("Token Error")}finally{w(!1)}})(),a()},[a,z,x]);let A=async b=>{if(b.preventDefault(),m(!0),o(""),q(""),!(j.customerId.trim()?j.deliveryAddress.trim()?0!==a.length||(o("Cart is empty. Please add items to cart first."),!1):(o("Delivery address is required"),!1):(o("Customer account is required. Please sign in again."),!1)))return void m(!1);try{let b=a.map(a=>{let b="number"==typeof a.price?a.price:Number.parseFloat(String(a.price??0))||0,c="number"==typeof a.quantity&&a.quantity>0?Math.floor(a.quantity):1;return{foodId:a._id,quantity:c,price:b}}),c=b.reduce((a,b)=>a+b.quantity*b.price,0),d={customerId:j.customerId,restaurantId:j.restaurantId||z,items:b,deliveryAddress:j.deliveryAddress,totalPrice:c};i("/checkout",{state:{orderData:d,fromCart:!0}})}catch(a){console.error("Error preparing order",a),o("Failed to prepare order. Please try again.")}finally{m(!1)}};return(0,b.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px 0"},children:[(0,b.jsx)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px"},children:(0,b.jsxs)("button",{onClick:()=>i("/customer/cart"),style:{backgroundColor:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"50px",padding:"12px 20px",color:"white",fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",marginBottom:"30px",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.3)",a.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",a.currentTarget.style.transform="translateY(0)"},children:[(0,b.jsx)(f.BsArrowLeftCircle,{size:20}),"Back to Cart"]})}),(0,b.jsx)("div",{style:{maxWidth:"1600px",margin:"0 auto",padding:"0 20px"},children:(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:"40px",alignItems:"start"},children:[(0,b.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"30px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"30px"},children:[(0,b.jsx)("div",{style:{width:"50px",height:"50px",backgroundColor:"#ff7f50",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px"},children:(0,b.jsx)("span",{style:{fontSize:"24px"},children:"üõí"})}),(0,b.jsx)("h2",{style:{color:"#333",fontSize:"28px",fontWeight:700,margin:0},children:"Order Summary"})]}),(0,b.jsx)("div",{style:{marginBottom:"30px"},children:a.map((c,d)=>{let e="number"==typeof c.price?c.price:Number.parseFloat(String(c.price??0))||0;return(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"15px 0",borderBottom:d<a.length-1?"1px solid #eee":"none"},children:[(0,b.jsx)("img",{src:c.image?(0,h.buildRestaurantServiceUrl)(String(c.image??"")):"https://placehold.co/60x60?text=Food",alt:String(c.name??"Food Item"),style:{width:"60px",height:"60px",borderRadius:"12px",objectFit:"cover",marginRight:"15px"},onError:a=>{a.currentTarget.src="https://placehold.co/60x60?text=Food"}}),(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("h4",{style:{color:"#333",fontSize:"16px",fontWeight:600,margin:"0 0 5px 0"},children:String(c.name??"Food Item")}),(0,b.jsx)("p",{style:{color:"#666",fontSize:"14px",margin:0},children:String(c.category??"Unknown")})]}),(0,b.jsx)("div",{style:{textAlign:"right"},children:(0,b.jsxs)("p",{style:{color:"#ff7f50",fontSize:"18px",fontWeight:700,margin:0},children:[e.toLocaleString()," VND"]})})]},c._id?`${c._id}-${d}`:`idx-${d}`)})}),(0,b.jsxs)("div",{style:{backgroundColor:"#f8f9fa",borderRadius:"15px",padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsx)("span",{style:{fontSize:"20px",fontWeight:600,color:"#333"},children:"Total Amount:"}),(0,b.jsxs)("span",{style:{fontSize:"28px",fontWeight:700,color:"#ff7f50"},children:[y.toLocaleString()," VND"]})]})]}),(0,b.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"30px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",minHeight:"600px"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"30px"},children:[(0,b.jsx)("div",{style:{width:"50px",height:"50px",backgroundColor:"#667eea",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px"},children:(0,b.jsx)("span",{style:{fontSize:"24px"},children:"üìù"})}),(0,b.jsx)("h2",{style:{color:"#333",fontSize:"28px",fontWeight:700,margin:0},children:"Delivery Details"})]}),n&&(0,b.jsx)("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"15px",borderRadius:"12px",marginBottom:"20px",border:"1px solid #fcc"},children:n}),p&&(0,b.jsx)("div",{style:{backgroundColor:"#efe",color:"#3c3",padding:"15px",borderRadius:"12px",marginBottom:"20px",border:"1px solid #cfc"},children:p}),(0,b.jsxs)("div",{style:{height:"100%"},children:[(0,b.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"16px",fontWeight:600,color:"#333"},children:"üë§ Customer Name"}),(0,b.jsx)("div",{style:{width:"100%",padding:"15px",border:"2px solid #eee",borderRadius:"12px",fontSize:"16px",backgroundColor:"#f8f9fa",color:"#666",boxSizing:"border-box",display:"flex",alignItems:"center",minHeight:"54px"},children:v?"Loading customer name...":r||"Customer name not available"}),!v&&!r&&(0,b.jsx)("div",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:"Debug: Check browser console for detailed logs"})]}),(0,b.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"16px",fontWeight:600,color:"#333"},children:"üè™ Restaurant Name"}),(0,b.jsx)("div",{style:{width:"100%",padding:"15px",border:"2px solid #eee",borderRadius:"12px",fontSize:"16px",backgroundColor:"#f8f9fa",color:"#666",boxSizing:"border-box",display:"flex",alignItems:"center",minHeight:"54px"},children:t||"Loading restaurant..."}),(0,b.jsx)("input",{type:"hidden",name:"restaurantId",value:j.restaurantId||z})]}),(0,b.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"16px",fontWeight:600,color:"#333"},children:"üìç Delivery Address"}),(0,b.jsx)("textarea",{name:"deliveryAddress",value:j.deliveryAddress,onChange:a=>{let{name:b,value:c}=a.target;k(a=>({...a,[b]:c}))},placeholder:"Enter your complete delivery address...",required:!0,rows:4,style:{width:"100%",padding:"15px",border:"2px solid #eee",borderRadius:"12px",fontSize:"16px",transition:"border-color 0.3s ease",outline:"none",resize:"vertical",boxSizing:"border-box",fontFamily:"inherit"},onFocus:a=>{a.currentTarget.style.borderColor="#667eea"},onBlur:a=>{a.currentTarget.style.borderColor="#eee"}})]}),(0,b.jsx)("button",{onClick:A,disabled:l||0===a.length,style:{width:"100%",padding:"18px",backgroundColor:l?"#ccc":"#ff7f50",color:"white",border:"none",borderRadius:"15px",fontSize:"18px",fontWeight:700,cursor:l?"not-allowed":"pointer",transition:"all 0.3s ease",boxShadow:"0 10px 20px rgba(255, 127, 80, 0.3)",boxSizing:"border-box",marginTop:"auto"},onMouseEnter:b=>{!l&&a.length>0&&(b.currentTarget.style.backgroundColor="#ff5722",b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 15px 30px rgba(255, 127, 80, 0.4)")},onMouseLeave:b=>{!l&&a.length>0&&(b.currentTarget.style.backgroundColor="#ff7f50",b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 10px 20px rgba(255, 127, 80, 0.3)")},children:l?(0,b.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,b.jsx)("div",{style:{width:"20px",height:"20px",border:"2px solid transparent",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Creating Order..."]}):`üçΩÔ∏è Place Order ‚Ä¢ ${y.toLocaleString()} VND`})]})]})]})}),(0,b.jsx)("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__9fe05eed._.js.map