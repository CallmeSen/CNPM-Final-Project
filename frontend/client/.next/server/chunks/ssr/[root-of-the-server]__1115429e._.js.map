{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///E:/GitHub/CNPM-Final-Project/frontend/client/src/config/api.ts"],"sourcesContent":["const stripTrailingSlash = (value: string) => value.replace(/\\/+$/, \"\");\r\n\r\nconst DEFAULT_RESTAURANT_BASE_URL = \"http://localhost:5002\";\r\nconst DEFAULT_AUTH_BASE_URL = \"http://localhost:5001\";\r\nconst DEFAULT_ORDER_BASE_URL = \"http://localhost:5005\";\r\nconst DEFAULT_PAYMENT_BASE_URL = \"http://localhost:5004\";\r\n\r\nconst shouldProxyApi =\r\n  (process.env.NEXT_PUBLIC_USE_API_PROXY ?? \"true\").toLowerCase() === \"true\";\r\n\r\nconst RESTAURANT_SERVICE_BASE_URL = stripTrailingSlash(\r\n  process.env.NEXT_PUBLIC_RESTAURANT_SERVICE_URL ??\r\n    process.env.NEXT_PUBLIC_API_BASE_URL ??\r\n    DEFAULT_RESTAURANT_BASE_URL,\r\n);\r\n\r\nconst AUTH_SERVICE_BASE_URL = stripTrailingSlash(\r\n  process.env.NEXT_PUBLIC_AUTH_SERVICE_URL ??\r\n    process.env.NEXT_PUBLIC_API_BASE_URL ??\r\n    DEFAULT_AUTH_BASE_URL,\r\n);\r\n\r\nconst ORDER_SERVICE_BASE_URL = stripTrailingSlash(\r\n  process.env.NEXT_PUBLIC_ORDER_SERVICE_URL ??\r\n    process.env.NEXT_PUBLIC_API_BASE_URL ??\r\n    DEFAULT_ORDER_BASE_URL,\r\n);\r\n\r\nconst PAYMENT_SERVICE_BASE_URL = stripTrailingSlash(\r\n  process.env.NEXT_PUBLIC_PAYMENT_SERVICE_URL ??\r\n    process.env.NEXT_PUBLIC_API_BASE_URL ??\r\n    DEFAULT_PAYMENT_BASE_URL,\r\n);\r\n\r\nconst buildServiceUrl = (baseUrl: string, path: string) => {\r\n  if (!path) {\r\n    return baseUrl;\r\n  }\r\n\r\n  if (/^https?:\\/\\//i.test(path)) {\r\n    return path;\r\n  }\r\n\r\n  const normalizedPath = path.startsWith(\"/\") ? path : `/${path}`;\r\n\r\n  if (shouldProxyApi && normalizedPath.startsWith(\"/api/\")) {\r\n    return normalizedPath;\r\n  }\r\n\r\n  return `${baseUrl}${normalizedPath}`;\r\n};\r\n\r\nexport const buildRestaurantServiceUrl = (path: string) =>\r\n  buildServiceUrl(RESTAURANT_SERVICE_BASE_URL, path);\r\n\r\nexport const buildAuthServiceUrl = (path: string) =>\r\n  buildServiceUrl(AUTH_SERVICE_BASE_URL, path);\r\n\r\nexport const buildOrderServiceUrl = (path: string) =>\r\n  buildServiceUrl(ORDER_SERVICE_BASE_URL, path);\r\n\r\nexport const buildPaymentServiceUrl = (path: string) =>\r\n  buildServiceUrl(PAYMENT_SERVICE_BASE_URL, path);\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA,MAAM,qBAAqB,CAAC,QAAkB,MAAM,OAAO,CAAC,QAAQ;AAEpE,MAAM,8BAA8B;AACpC,MAAM,wBAAwB;AAC9B,MAAM,yBAAyB;AAC/B,MAAM,2BAA2B;AAEjC,MAAM,iBACJ,CAAC,4CAAyC,MAAM,EAAE,WAAW,OAAO;AAEtE,MAAM,8BAA8B,mBAClC,6DACE,QAAQ,GAAG,CAAC,wBAAwB,IACpC;AAGJ,MAAM,wBAAwB,mBAC5B,6DACE,QAAQ,GAAG,CAAC,wBAAwB,IACpC;AAGJ,MAAM,yBAAyB,mBAC7B,6DACE,QAAQ,GAAG,CAAC,wBAAwB,IACpC;AAGJ,MAAM,2BAA2B,mBAC/B,6DACE,QAAQ,GAAG,CAAC,wBAAwB,IACpC;AAGJ,MAAM,kBAAkB,CAAC,SAAiB;IACxC,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,IAAI,gBAAgB,IAAI,CAAC,OAAO;QAC9B,OAAO;IACT;IAEA,MAAM,iBAAiB,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAE/D,IAAI,kBAAkB,eAAe,UAAU,CAAC,UAAU;QACxD,OAAO;IACT;IAEA,OAAO,GAAG,UAAU,gBAAgB;AACtC;AAEO,MAAM,4BAA4B,CAAC,OACxC,gBAAgB,6BAA6B;AAExC,MAAM,sBAAsB,CAAC,OAClC,gBAAgB,uBAAuB;AAElC,MAAM,uBAAuB,CAAC,OACnC,gBAAgB,wBAAwB;AAEnC,MAAM,yBAAyB,CAAC,OACrC,gBAAgB,0BAA0B","debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/styles/checkout.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"backLink\": \"checkout-module__d81G3q__backLink\",\n  \"breadcrumbCurrent\": \"checkout-module__d81G3q__breadcrumbCurrent\",\n  \"breadcrumbLink\": \"checkout-module__d81G3q__breadcrumbLink\",\n  \"breadcrumbSeparator\": \"checkout-module__d81G3q__breadcrumbSeparator\",\n  \"breadcrumbs\": \"checkout-module__d81G3q__breadcrumbs\",\n  \"buttonIcon\": \"checkout-module__d81G3q__buttonIcon\",\n  \"cardBrand\": \"checkout-module__d81G3q__cardBrand\",\n  \"cardDetailsGrid\": \"checkout-module__d81G3q__cardDetailsGrid\",\n  \"cardElement\": \"checkout-module__d81G3q__cardElement\",\n  \"cardElementContainer\": \"checkout-module__d81G3q__cardElementContainer\",\n  \"cardFieldWrapper\": \"checkout-module__d81G3q__cardFieldWrapper\",\n  \"cardLabel\": \"checkout-module__d81G3q__cardLabel\",\n  \"cashActions\": \"checkout-module__d81G3q__cashActions\",\n  \"cashDescription\": \"checkout-module__d81G3q__cashDescription\",\n  \"cashSection\": \"checkout-module__d81G3q__cashSection\",\n  \"checkoutContainer\": \"checkout-module__d81G3q__checkoutContainer\",\n  \"checkoutFallback\": \"checkout-module__d81G3q__checkoutFallback\",\n  \"checkoutFooter\": \"checkout-module__d81G3q__checkoutFooter\",\n  \"checkoutGrid\": \"checkout-module__d81G3q__checkoutGrid\",\n  \"emptyCartActions\": \"checkout-module__d81G3q__emptyCartActions\",\n  \"emptyCartDescription\": \"checkout-module__d81G3q__emptyCartDescription\",\n  \"emptyCartIcon\": \"checkout-module__d81G3q__emptyCartIcon\",\n  \"emptyCartTitle\": \"checkout-module__d81G3q__emptyCartTitle\",\n  \"emptyCheckoutCard\": \"checkout-module__d81G3q__emptyCheckoutCard\",\n  \"emptyCheckoutWrapper\": \"checkout-module__d81G3q__emptyCheckoutWrapper\",\n  \"errorMessage\": \"checkout-module__d81G3q__errorMessage\",\n  \"fadeInUp\": \"checkout-module__d81G3q__fadeInUp\",\n  \"methodDescription\": \"checkout-module__d81G3q__methodDescription\",\n  \"methodEmoji\": \"checkout-module__d81G3q__methodEmoji\",\n  \"methodNotice\": \"checkout-module__d81G3q__methodNotice\",\n  \"methodOption\": \"checkout-module__d81G3q__methodOption\",\n  \"methodOptions\": \"checkout-module__d81G3q__methodOptions\",\n  \"methodSection\": \"checkout-module__d81G3q__methodSection\",\n  \"methodTitle\": \"checkout-module__d81G3q__methodTitle\",\n  \"paymentForm\": \"checkout-module__d81G3q__paymentForm\",\n  \"paymentHeader\": \"checkout-module__d81G3q__paymentHeader\",\n  \"paymentIcon\": \"checkout-module__d81G3q__paymentIcon\",\n  \"paymentSection\": \"checkout-module__d81G3q__paymentSection\",\n  \"paymentSubtitle\": \"checkout-module__d81G3q__paymentSubtitle\",\n  \"paymentTitle\": \"checkout-module__d81G3q__paymentTitle\",\n  \"primaryButton\": \"checkout-module__d81G3q__primaryButton\",\n  \"secondaryButton\": \"checkout-module__d81G3q__secondaryButton\",\n  \"submitButton\": \"checkout-module__d81G3q__submitButton\",\n  \"successMessage\": \"checkout-module__d81G3q__successMessage\",\n  \"summaryAddress\": \"checkout-module__d81G3q__summaryAddress\",\n  \"summaryAddressLabel\": \"checkout-module__d81G3q__summaryAddressLabel\",\n  \"summaryFooter\": \"checkout-module__d81G3q__summaryFooter\",\n  \"summaryHeader\": \"checkout-module__d81G3q__summaryHeader\",\n  \"summaryIcon\": \"checkout-module__d81G3q__summaryIcon\",\n  \"summaryItem\": \"checkout-module__d81G3q__summaryItem\",\n  \"summaryItemBody\": \"checkout-module__d81G3q__summaryItemBody\",\n  \"summaryItemName\": \"checkout-module__d81G3q__summaryItemName\",\n  \"summaryItemPrice\": \"checkout-module__d81G3q__summaryItemPrice\",\n  \"summaryItemQuantity\": \"checkout-module__d81G3q__summaryItemQuantity\",\n  \"summaryItems\": \"checkout-module__d81G3q__summaryItems\",\n  \"summarySection\": \"checkout-module__d81G3q__summarySection\",\n  \"summarySubtitle\": \"checkout-module__d81G3q__summarySubtitle\",\n  \"summaryTitle\": \"checkout-module__d81G3q__summaryTitle\",\n  \"supportBox\": \"checkout-module__d81G3q__supportBox\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///E:/GitHub/CNPM-Final-Project/frontend/client/src/app/pages/payment/Checkout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useRef, useState, FormEvent, useContext } from \"react\";\r\nimport { CardNumberElement, CardExpiryElement, CardCvcElement, Elements, useElements, useStripe } from \"@stripe/react-stripe-js\";\r\nimport { loadStripe, StripeCardNumberElementChangeEvent } from \"@stripe/stripe-js\";\r\nimport axios from \"axios\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { buildAuthServiceUrl } from \"@/config/api\";\r\nimport { CartContext } from \"../contexts/CartContext\";\r\nimport styles from \"../../styles/checkout.module.css\";\r\n\r\nconst publishableKey = process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY ?? \"\";\r\nconst stripePromise = publishableKey ? loadStripe(publishableKey) : null;\r\n\r\nconst ORDER_SERVICE_BASE_URL = process.env.NEXT_PUBLIC_ORDER_SERVICE_URL ?? \"http://localhost:5005\";\r\nconst PAYMENT_SERVICE_BASE_URL = process.env.NEXT_PUBLIC_PAYMENT_SERVICE_URL ?? \"http://localhost:5004\";\r\n\r\ntype PaymentMethodOption = \"stripe\" | \"cash\";\r\n\r\ntype PendingOrderItem = {\r\n  foodId?: string;\r\n  quantity?: number;\r\n  price?: number;\r\n  name?: string;\r\n};\r\n\r\ntype PendingOrder = {\r\n  _id?: string;\r\n  orderId?: string;\r\n  customerId?: string;\r\n  restaurantId?: string;\r\n  items?: PendingOrderItem[];\r\n  deliveryAddress?: string;\r\n  totalPrice?: number;\r\n};\r\n\r\ntype CustomerProfile = {\r\n  firstName?: string;\r\n  lastName?: string;\r\n  email?: string;\r\n  phone?: string;\r\n};\r\n\r\nconst formatCurrency = (amount: number) => amount.toLocaleString(\"en-US\", { style: \"currency\", currency: \"USD\" });\r\n\r\nconst decodeJwtPayload = (token: string | null): Record<string, unknown> | null => {\r\n  if (!token) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const parts = token.split(\".\");\r\n    if (parts.length < 2) {\r\n      return null;\r\n    }\r\n\r\n    let base64 = parts[1] ?? \"\";\r\n    base64 = base64.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n    while (base64.length % 4 !== 0) {\r\n      base64 += \"=\";\r\n    }\r\n\r\n    const payloadJson = atob(base64);\r\n    return JSON.parse(payloadJson) as Record<string, unknown>;\r\n  } catch (tokenError) {\r\n    console.error(\"Failed to decode auth token\", tokenError);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst decodeCustomerIdFromToken = (token: string | null): string => {\r\n  const payload = decodeJwtPayload(token);\r\n\r\n  if (!payload) {\r\n    return \"\";\r\n  }\r\n\r\n  const candidate =\r\n    payload.id ??\r\n    payload._id ??\r\n    payload.sub ??\r\n    payload.userId ??\r\n    payload.user_id ??\r\n    payload.userID;\r\n\r\n  if (!candidate) {\r\n    return \"\";\r\n  }\r\n\r\n  return String(candidate).trim();\r\n};\r\n\r\ntype OrderSubmissionItem = {\r\n  foodId: string;\r\n  quantity: number;\r\n  price: number;\r\n};\r\n\r\ntype OrderSubmissionPayload = {\r\n  customerId: string;\r\n  restaurantId: string;\r\n  items: OrderSubmissionItem[];\r\n  deliveryAddress: string;\r\n  totalPrice: number;\r\n};\r\n\r\nconst buildOrderSubmissionPayload = (\r\n  order: PendingOrder | null | undefined,\r\n  token: string | null,\r\n): { payload?: OrderSubmissionPayload; error?: string } => {\r\n  if (!order) {\r\n    return { error: \"No order data available.\" };\r\n  }\r\n\r\n  const decodedIdFromToken = decodeCustomerIdFromToken(token);\r\n  let resolvedCustomerId = decodedIdFromToken;\r\n\r\n  if (!resolvedCustomerId) {\r\n    resolvedCustomerId = typeof order?.customerId === \"string\" ? order.customerId.trim() : \"\";\r\n  }\r\n\r\n  if (!resolvedCustomerId) {\r\n    return {\r\n      error: \"We could not validate your account for this order. Please sign in again and retry.\",\r\n    };\r\n  }\r\n\r\n  const restaurantId = String(order.restaurantId ?? \"\").trim();\r\n  if (!restaurantId) {\r\n    return {\r\n      error: \"We could not determine the restaurant for this order. Please return to your cart and try again.\",\r\n    };\r\n  }\r\n\r\n  const deliveryAddress = String(order.deliveryAddress ?? \"\").trim();\r\n  if (!deliveryAddress) {\r\n    return {\r\n      error: \"Your delivery address is missing. Please update it in your cart and try again.\",\r\n    };\r\n  }\r\n\r\n  const sanitizedItems =\r\n    order.items?.reduce<OrderSubmissionItem[]>((acc, item) => {\r\n      const foodId = String(item.foodId ?? \"\").trim();\r\n      if (!foodId) {\r\n        return acc;\r\n      }\r\n\r\n      const rawQuantity = Number(item.quantity ?? 0);\r\n      const quantity = Number.isFinite(rawQuantity) ? Math.max(1, Math.floor(rawQuantity)) : 0;\r\n      const rawPrice = Number(item.price ?? 0);\r\n      const price = Number.isFinite(rawPrice) ? Math.round(rawPrice * 100) / 100 : 0;\r\n\r\n      if (quantity <= 0 || price <= 0) {\r\n        return acc;\r\n      }\r\n\r\n      acc.push({ foodId, quantity, price });\r\n      return acc;\r\n    }, []) ?? [];\r\n\r\n  if (sanitizedItems.length === 0) {\r\n    return {\r\n      error: \"We could not find any items in your order. Please add items to your cart and try again.\",\r\n    };\r\n  }\r\n\r\n  const totalPrice = sanitizedItems.reduce((sum, item) => sum + item.quantity * item.price, 0);\r\n\r\n  return {\r\n    payload: {\r\n      customerId: resolvedCustomerId,\r\n      restaurantId,\r\n      items: sanitizedItems,\r\n      deliveryAddress,\r\n      totalPrice,\r\n    },\r\n  };\r\n};\r\n\r\nconst usePendingOrder = (): PendingOrder | null => {\r\n  const searchParams = useSearchParams();\r\n  const orderPayloadRaw = searchParams.get(\"order\");\r\n\r\n  if (orderPayloadRaw) {\r\n    try {\r\n      const parsed = JSON.parse(decodeURIComponent(orderPayloadRaw));\r\n      if (parsed && typeof parsed === \"object\") {\r\n        return parsed as PendingOrder;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to parse order payload from URL\", error);\r\n    }\r\n  }\r\n\r\n  if (typeof window === \"undefined\") {\r\n    return null;\r\n  }\r\n\r\n  const saved = localStorage.getItem(\"pendingOrder\");\r\n  if (!saved) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const parsed = JSON.parse(saved);\r\n    return parsed && typeof parsed === \"object\" ? (parsed as PendingOrder) : null;\r\n  } catch (error) {\r\n    console.error(\"Failed to parse pendingOrder from storage\", error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Main checkout content component\r\nconst CheckoutContent = ({ stripeEnabled }: { stripeEnabled: boolean }) => {\r\n  const router = useRouter();\r\n  const order = usePendingOrder();\r\n  const [selectedMethod, setSelectedMethod] = useState<PaymentMethodOption | null>(null);\r\n  const [customerProfile, setCustomerProfile] = useState<CustomerProfile | null>(null);\r\n\r\n  // Check authentication and redirect to login if not authenticated\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") {\r\n      return;\r\n    }\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      // Save current path to return after login\r\n      router.push(\"/auth/login?redirect=/checkout\");\r\n    }\r\n  }, [router]);\r\n\r\n  const totalPrice = useMemo(() => {\r\n    const amount = order?.totalPrice ?? 0;\r\n    return Number.isFinite(amount) ? amount : 0;\r\n  }, [order]);\r\n\r\n  const billingDetails = useMemo(() => {\r\n    const firstName = customerProfile?.firstName ?? \"Customer\";\r\n    const lastName = customerProfile?.lastName ?? \"\";\r\n    const email = customerProfile?.email ?? \"customer@example.com\";\r\n    const phone = customerProfile?.phone ?? \"\";\r\n\r\n    return {\r\n      firstName,\r\n      lastName,\r\n      fullName: [firstName, lastName].filter(Boolean).join(\" \"),\r\n      email,\r\n      phone,\r\n    };\r\n  }, [customerProfile]);\r\n\r\n  useEffect(() => {\r\n    const fetchCustomerProfile = async () => {\r\n      if (typeof window === \"undefined\") {\r\n        return;\r\n      }\r\n\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(buildAuthServiceUrl(\"/api/auth/customer/profile\"), {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        const profile =\r\n          response.data?.data?.customer ?? response.data?.data ?? response.data?.customer ?? {};\r\n        setCustomerProfile(profile);\r\n      } catch (profileError) {\r\n        console.error(\"Failed to fetch customer profile\", profileError);\r\n      }\r\n    };\r\n\r\n    fetchCustomerProfile();\r\n  }, []);\r\n\r\n  const handleMethodSelect = (method: PaymentMethodOption) => {\r\n    setSelectedMethod(method);\r\n  };\r\n\r\n  if (!order || !order.items || order.items.length === 0) {\r\n    return (\r\n      <div className={styles.emptyCheckoutWrapper}>\r\n        <div className={styles.emptyCheckoutCard}>\r\n          <div className={styles.emptyCartIcon}>\r\n            <svg width=\"120\" height=\"120\" viewBox=\"0 0 120 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <circle cx=\"60\" cy=\"60\" r=\"60\" fill=\"#F0F4F8\"/>\r\n              <path d=\"M40 45C40 43.8954 40.8954 43 42 43H78C79.1046 43 80 43.8954 80 45V75C80 76.1046 79.1046 77 78 77H42C40.8954 77 40 76.1046 40 75V45Z\" stroke=\"#94A3B8\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n              <path d=\"M50 43V40C50 34.4772 54.4772 30 60 30C65.5228 30 70 34.4772 70 40V43\" stroke=\"#94A3B8\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n              <path d=\"M45 60L55 70L75 50\" stroke=\"#3B82F6\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\" opacity=\"0.3\"/>\r\n            </svg>\r\n          </div>\r\n          <h1 className={styles.emptyCartTitle}>Your Cart is Empty</h1>\r\n          <p className={styles.emptyCartDescription}>\r\n            Looks like you haven&apos;t added any items to your cart yet. \r\n            Browse our delicious menu and find something you love!\r\n          </p>\r\n          <div className={styles.emptyCartActions}>\r\n            <Link href=\"/\" className={styles.primaryButton}>\r\n              <span className={styles.buttonIcon}>üçΩÔ∏è</span>\r\n              Explore Restaurants\r\n            </Link>\r\n            <Link href=\"/customer/order-history\" className={styles.secondaryButton}>\r\n              View Order History\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.checkoutContainer}>\r\n      <nav className={styles.breadcrumbs}>\r\n        <Link href=\"/\" className={styles.breadcrumbLink}>\r\n          Home\r\n        </Link>\r\n        <span className={styles.breadcrumbSeparator}>/</span>\r\n        <Link href=\"/customer/cart\" className={styles.breadcrumbLink}>\r\n          Cart\r\n        </Link>\r\n        <span className={styles.breadcrumbSeparator}>/</span>\r\n        <span className={styles.breadcrumbCurrent}>Checkout</span>\r\n      </nav>\r\n\r\n      <div className={styles.checkoutGrid}>\r\n        <OrderSummary order={order} totalPrice={totalPrice} billingDetails={billingDetails} />\r\n        {selectedMethod === null && <PaymentMethodSelection stripeEnabled={stripeEnabled} onSelect={handleMethodSelect} />}\r\n        {selectedMethod === \"cash\" && (\r\n          <CashPaymentSection order={order} totalPrice={totalPrice} onBack={() => setSelectedMethod(null)} />\r\n        )}\r\n        {selectedMethod === \"stripe\" && stripeEnabled && (\r\n          <StripePaymentSection\r\n            order={order}\r\n            totalPrice={totalPrice}\r\n            billingDetails={billingDetails}\r\n            onBack={() => setSelectedMethod(null)}\r\n          />\r\n        )}\r\n        {selectedMethod === \"stripe\" && !stripeEnabled && (\r\n          <section className={styles.methodSection}>\r\n            <p className={styles.methodNotice}>\r\n              Card payments are unavailable right now. Please select cash on delivery.\r\n            </p>\r\n            <button type=\"button\" className={styles.secondaryButton} onClick={() => setSelectedMethod(null)}>\r\n              Go back\r\n            </button>\r\n          </section>\r\n        )}\r\n      </div>\r\n\r\n      <footer className={styles.checkoutFooter}>\r\n        <p>Secure checkout with flexible payment options.</p>\r\n        <p>\r\n          Need to make changes? <button onClick={() => router.back()}>Go back</button>\r\n        </p>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Order summary component\r\nconst OrderSummary = ({\r\n  order,\r\n  totalPrice,\r\n  billingDetails,\r\n}: {\r\n  order: PendingOrder;\r\n  totalPrice: number;\r\n  billingDetails: { fullName: string };\r\n}) => (\r\n  <section className={styles.summarySection}>\r\n    <header className={styles.summaryHeader}>\r\n      <div className={styles.summaryIcon}>üßæ</div>\r\n      <div>\r\n        <h2 className={styles.summaryTitle}>Order Summary</h2>\r\n        {billingDetails.fullName && <p className={styles.summarySubtitle}>{billingDetails.fullName}</p>}\r\n      </div>\r\n    </header>\r\n    <div className={styles.summaryItems}>\r\n      {order?.items?.map((item, index) => (\r\n        <div key={`${item.foodId ?? `item-${index}`}`} className={styles.summaryItem}>\r\n          <div className={styles.summaryItemBody}>\r\n            <span className={styles.summaryItemName}>{item.name ?? \"Food Item\"}</span>\r\n            <span className={styles.summaryItemQuantity}>Qty: {item.quantity ?? 1}</span>\r\n          </div>\r\n          <span className={styles.summaryItemPrice}>{formatCurrency(item.price ?? 0)}</span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n    <div className={styles.summaryFooter}>\r\n      <span>Total</span>\r\n      <strong>{formatCurrency(totalPrice)}</strong>\r\n    </div>\r\n    {order?.deliveryAddress && (\r\n      <div className={styles.summaryAddress}>\r\n        <span className={styles.summaryAddressLabel}>Delivery Address</span>\r\n        <p>{order.deliveryAddress}</p>\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// Payment method selection component\r\nconst PaymentMethodSelection = ({\r\n  stripeEnabled,\r\n  onSelect,\r\n}: {\r\n  stripeEnabled: boolean;\r\n  onSelect: (method: PaymentMethodOption) => void;\r\n}) => (\r\n  <section className={styles.methodSection}>\r\n    <header className={styles.paymentHeader}>\r\n      <div className={styles.paymentIcon}>üí∞</div>\r\n      <div>\r\n        <h2 className={styles.paymentTitle}>Choose Payment Method</h2>\r\n        <p className={styles.paymentSubtitle}>Select how you would like to pay for this order</p>\r\n      </div>\r\n    </header>\r\n\r\n    <div className={styles.methodOptions}>\r\n      <button type=\"button\" className={styles.methodOption} onClick={() => onSelect(\"cash\")}>\r\n        <span className={styles.methodEmoji}>üíµ</span>\r\n        <span className={styles.methodTitle}>Cash on Delivery</span>\r\n        <span className={styles.methodDescription}>Pay when your food arrives</span>\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        className={styles.methodOption}\r\n        onClick={() => onSelect(\"stripe\")}\r\n        disabled={!stripeEnabled}\r\n      >\r\n        <span className={styles.methodEmoji}>üí≥</span>\r\n        <span className={styles.methodTitle}>Pay with Card</span>\r\n        <span className={styles.methodDescription}>\r\n          {stripeEnabled ? \"Secure online payment via Stripe\" : \"Card payments unavailable\"}\r\n        </span>\r\n      </button>\r\n    </div>\r\n\r\n    {!stripeEnabled && (\r\n      <div className={styles.methodNotice}>\r\n        Card payments are currently unavailable. Please choose cash on delivery.\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// Cash payment component (no Stripe hooks)\r\nconst CashPaymentSection = ({\r\n  order,\r\n  totalPrice,\r\n  onBack,\r\n}: {\r\n  order: PendingOrder;\r\n  totalPrice: number;\r\n  onBack: () => void;\r\n}) => {\r\n  const router = useRouter();\r\n  const { clearCart } = useContext(CartContext);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [success, setSuccess] = useState<string>(\"\");\r\n\r\n  const handleCashPayment = async () => {\r\n    if (!order) {\r\n      setError(\"No order data available.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\r\n    const { payload, error: payloadError } = buildOrderSubmissionPayload(order, token);\r\n\r\n    if (!payload) {\r\n      setError(payloadError ?? \"Unable to prepare your order. Please try again.\");\r\n      setIsSubmitting(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await axios.post(\r\n        `${ORDER_SERVICE_BASE_URL}/api/orders`,\r\n        payload,\r\n        {\r\n          headers: {\r\n            Authorization: token ? `Bearer ${token}` : \"\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      // Clear cart from CartContext and localStorage\r\n      clearCart();\r\n      if (typeof window !== \"undefined\") {\r\n        [\"pendingOrder\", \"cart\", \"cart_guest\"].forEach((key) => {\r\n          try {\r\n            localStorage.removeItem(key);\r\n          } catch (e) {\r\n            console.error(`Failed to remove ${key}`, e);\r\n          }\r\n        });\r\n      }\r\n\r\n      setSuccess(\"Order placed successfully with cash payment on delivery.\");\r\n      setTimeout(() => {\r\n        router.push(\"/customer/order-history\");\r\n      }, 2000);\r\n    } catch (cashError) {\r\n      if (axios.isAxiosError(cashError)) {\r\n        console.error(\"Failed to place cash order\", {\r\n          status: cashError.response?.status,\r\n          data: cashError.response?.data,\r\n          message: cashError.message,\r\n          payload,\r\n        });\r\n      } else {\r\n        console.error(\"Failed to place cash order\", cashError);\r\n      }\r\n      setError(\"Unable to place order. Please try again.\");\r\n    }\r\n\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  return (\r\n    <section className={styles.cashSection}>\r\n      <header className={styles.paymentHeader}>\r\n        <div className={styles.paymentIcon}>üßæ</div>\r\n        <div>\r\n          <h2 className={styles.paymentTitle}>Cash on Delivery</h2>\r\n          <p className={styles.paymentSubtitle}>Confirm your order and pay when it arrives</p>\r\n        </div>\r\n      </header>\r\n\r\n      <p className={styles.cashDescription}>\r\n        A confirmation will be sent to your email. Please prepare exact change totaling{\" \"}\r\n        {formatCurrency(totalPrice)}.\r\n      </p>\r\n\r\n      <div className={styles.cashActions}>\r\n        <button type=\"button\" className={styles.secondaryButton} onClick={onBack} disabled={isSubmitting}>\r\n          Choose another method\r\n        </button>\r\n        <button type=\"button\" className={styles.submitButton} onClick={handleCashPayment} disabled={isSubmitting}>\r\n          {isSubmitting ? \"Placing order‚Ä¶\" : \"Confirm Cash Order\"}\r\n        </button>\r\n      </div>\r\n\r\n      {error && <div className={styles.errorMessage}>{error}</div>}\r\n      {success && <div className={styles.successMessage}>{success}</div>}\r\n    </section>\r\n  );\r\n};\r\n\r\n// Stripe payment component (MUST be inside Elements provider)\r\nconst StripePaymentSection = ({\r\n  order,\r\n  totalPrice,\r\n  billingDetails,\r\n  onBack,\r\n}: {\r\n  order: PendingOrder;\r\n  totalPrice: number;\r\n  billingDetails: { firstName: string; lastName: string; fullName: string; email: string; phone: string };\r\n  onBack: () => void;\r\n}) => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const router = useRouter();\r\n  const { clearCart } = useContext(CartContext);\r\n\r\n  const [clientSecret, setClientSecret] = useState<string>(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [success, setSuccess] = useState<string>(\"\");\r\n  const [cardBrand, setCardBrand] = useState<string>(\"\");\r\n  const [isPaymentDisabled, setPaymentDisabled] = useState(false);\r\n  const hasInitialised = useRef(false);\r\n\r\n  const amountInCents = useMemo(() => Math.round(totalPrice * 100), [totalPrice]);\r\n\r\n  const paymentPayload = useMemo(() => {\r\n    let resolvedCustomerId = \"\";\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      const storedToken = localStorage.getItem(\"token\");\r\n      resolvedCustomerId = decodeCustomerIdFromToken(storedToken);\r\n    }\r\n\r\n    if (!resolvedCustomerId) {\r\n      const baseCustomerId =\r\n        typeof order?.customerId === \"string\" ? order.customerId.trim() : \"\";\r\n      resolvedCustomerId = baseCustomerId;\r\n    }\r\n\r\n    if (!resolvedCustomerId) {\r\n      resolvedCustomerId = billingDetails.fullName || \"guest\";\r\n    }\r\n\r\n    const payload = {\r\n      orderId: order?.orderId || `ORDER-${Date.now()}`,\r\n      userId: resolvedCustomerId,\r\n      amount: amountInCents / 100,\r\n      currency: \"usd\",\r\n      firstName: billingDetails.firstName,\r\n      lastName: billingDetails.lastName,\r\n      email: billingDetails.email,\r\n      phone: billingDetails.phone ?? \"+1234567890\",\r\n    };\r\n\r\n    console.log(\"üí≥ Payment payload prepared:\", {\r\n      orderId: payload.orderId,\r\n      orderHasOrderId: !!order?.orderId,\r\n      orderObject: order,\r\n    });\r\n\r\n    return payload;\r\n  }, [amountInCents, billingDetails, order]);\r\n\r\n  useEffect(() => {\r\n    const initialisePaymentIntent = async () => {\r\n      if (!order || !order.items || order.items.length === 0) {\r\n        return;\r\n      }\r\n\r\n      if (hasInitialised.current || clientSecret) {\r\n        return;\r\n      }\r\n\r\n      hasInitialised.current = true;\r\n\r\n      try {\r\n        console.log(\"üöÄ Calling payment API with payload:\", paymentPayload);\r\n        const response = await axios.post(`${PAYMENT_SERVICE_BASE_URL}/api/payment/process`, paymentPayload);\r\n        console.log(\"‚úÖ Payment API response:\", response.data);\r\n\r\n        if (response.data?.paymentStatus === \"Paid\" || response.data?.disablePayment) {\r\n          setSuccess(\"This order has already been paid.\");\r\n          setPaymentDisabled(true);\r\n          return;\r\n        }\r\n\r\n        if (response.data?.clientSecret) {\r\n          setClientSecret(response.data.clientSecret);\r\n        } else {\r\n          setError(\"Unable to initialise payment. Please try again later.\");\r\n        }\r\n      } catch (intentError) {\r\n        console.error(\"Failed to create payment intent\", intentError);\r\n        setError(\"Unable to initialise payment. Please try again later.\");\r\n      }\r\n    };\r\n\r\n    initialisePaymentIntent();\r\n  }, [clientSecret, order, paymentPayload]);\r\n\r\n  const handleCardNumberChange = (event: StripeCardNumberElementChangeEvent) => {\r\n    if (event.brand) {\r\n      setCardBrand(event.brand);\r\n    }\r\n    setError(event.error?.message ?? \"\");\r\n  };\r\n\r\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    if (!stripe || !elements || !clientSecret) {\r\n      setError(\"Payment is not ready yet. Please wait a moment and try again.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const cardElement = elements.getElement(CardNumberElement);\r\n      if (!cardElement) {\r\n        setError(\"Unable to access card details. Please reload and try again.\");\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      const { error: paymentMethodError, paymentMethod } = await stripe.createPaymentMethod({\r\n        type: \"card\",\r\n        card: cardElement,\r\n        billing_details: {\r\n          name: billingDetails.fullName,\r\n          email: billingDetails.email,\r\n        },\r\n      });\r\n\r\n      if (paymentMethodError) {\r\n        setError(paymentMethodError.message ?? \"Unable to process payment method.\");\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {\r\n        payment_method: paymentMethod?.id,\r\n      });\r\n\r\n      if (confirmError) {\r\n        setError(confirmError.message ?? \"Payment confirmation failed. Please try again.\");\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      if (paymentIntent?.status === \"succeeded\") {\r\n        setSuccess(\"Payment successful! Your order has been placed.\");\r\n        setPaymentDisabled(true);\r\n\r\n        // Order already created in CreateOrderFromCart, just clear cart\r\n        clearCart();\r\n        if (typeof window !== \"undefined\") {\r\n          [\"pendingOrder\", \"cart\", \"cart_guest\"].forEach((key) => {\r\n            try {\r\n              localStorage.removeItem(key);\r\n            } catch (e) {\r\n              console.error(`Failed to remove ${key}`, e);\r\n            }\r\n          });\r\n        }\r\n\r\n        setTimeout(() => {\r\n          router.push(\"/customer/order-history\");\r\n        }, 2000);\r\n      } else {\r\n        setError(\"Payment did not complete. Please try again.\");\r\n      }\r\n    } catch (submitError) {\r\n      console.error(\"Unexpected checkout error\", submitError);\r\n      setError(\"An unexpected error occurred. Please try again.\");\r\n    }\r\n\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  return (\r\n    <section className={styles.paymentSection}>\r\n      <header className={styles.paymentHeader}>\r\n        <div className={styles.paymentIcon}>üí≥</div>\r\n        <div>\r\n          <h2 className={styles.paymentTitle}>Card Details</h2>\r\n          <p className={styles.paymentSubtitle}>Secure payments powered by Stripe</p>\r\n        </div>\r\n      </header>\r\n\r\n      <form onSubmit={handleSubmit} className={styles.paymentForm}>\r\n        <div className={styles.cardFieldWrapper}>\r\n          <label htmlFor=\"card-number-element\" className={styles.cardLabel}>\r\n            Card number\r\n          </label>\r\n          <div className={styles.cardElementContainer}>\r\n            <CardNumberElement\r\n              id=\"card-number-element\"\r\n              className={styles.cardElement}\r\n              options={{\r\n                style: {\r\n                  base: {\r\n                    fontSize: \"16px\",\r\n                    color: \"#1f2933\",\r\n                    \"::placeholder\": {\r\n                      color: \"#9aa5b1\",\r\n                    },\r\n                  },\r\n                  invalid: {\r\n                    color: \"#d64545\",\r\n                  },\r\n                },\r\n                showIcon: true,\r\n              }}\r\n              onChange={handleCardNumberChange}\r\n            />\r\n            {cardBrand && <span className={styles.cardBrand}>{cardBrand}</span>}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={styles.cardDetailsGrid}>\r\n          <div className={styles.cardFieldWrapper}>\r\n            <label htmlFor=\"card-expiry-element\" className={styles.cardLabel}>\r\n              Expiration\r\n            </label>\r\n            <div className={styles.cardElementContainer}>\r\n              <CardExpiryElement\r\n                id=\"card-expiry-element\"\r\n                className={styles.cardElement}\r\n                options={{\r\n                  style: {\r\n                    base: {\r\n                      fontSize: \"16px\",\r\n                      color: \"#1f2933\",\r\n                      \"::placeholder\": {\r\n                        color: \"#9aa5b1\",\r\n                      },\r\n                    },\r\n                    invalid: {\r\n                      color: \"#d64545\",\r\n                    },\r\n                  },\r\n                }}\r\n                onChange={(event) => setError(event.error?.message ?? \"\")}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className={styles.cardFieldWrapper}>\r\n            <label htmlFor=\"card-cvc-element\" className={styles.cardLabel}>\r\n              CVC\r\n            </label>\r\n            <div className={styles.cardElementContainer}>\r\n              <CardCvcElement\r\n                id=\"card-cvc-element\"\r\n                className={styles.cardElement}\r\n                options={{\r\n                  style: {\r\n                    base: {\r\n                      fontSize: \"16px\",\r\n                      color: \"#1f2933\",\r\n                      \"::placeholder\": {\r\n                        color: \"#9aa5b1\",\r\n                      },\r\n                    },\r\n                    invalid: {\r\n                      color: \"#d64545\",\r\n                    },\r\n                  },\r\n                }}\r\n                onChange={(event) => setError(event.error?.message ?? \"\")}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className={styles.submitButton}\r\n          disabled={isSubmitting || isPaymentDisabled || !stripe || !elements}\r\n        >\r\n          {isSubmitting ? \"Processing‚Ä¶\" : `Pay ${formatCurrency(totalPrice)}`}\r\n        </button>\r\n\r\n        <button type=\"button\" className={styles.secondaryButton} onClick={onBack} disabled={isSubmitting}>\r\n          Choose another method\r\n        </button>\r\n\r\n        {error && <div className={styles.errorMessage}>{error}</div>}\r\n        {success && <div className={styles.successMessage}>{success}</div>}\r\n      </form>\r\n\r\n      <div className={styles.supportBox}>\r\n        <p>Need help? Contact our support team at</p>\r\n        <a href=\"mailto:support@fooddelivery.local\">support@fooddelivery.local</a>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default function CheckoutPage() {\r\n  // Always wrap in Elements provider, but pass stripeEnabled flag\r\n  // Elements provider can handle null stripe gracefully\r\n  return (\r\n    <Elements stripe={stripePromise}>\r\n      <CheckoutContent stripeEnabled={!!stripePromise} />\r\n    </Elements>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}