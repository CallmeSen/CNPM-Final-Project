{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///E:/GitHub/CNPM-Final-Project/frontend/client/src/app/pages/auth/AuthRegister.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { FormEvent, useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport axios from \"axios\";\r\nimport \"../../styles/auth-register.css\";\r\nconst AuthRegister = () => {\r\n  const [form, setForm] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    password: \"\",\r\n    location: \"\",\r\n  });\r\n  const [error, setError] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n    setError(\"\");\r\n  };\r\n\r\n  const handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const payload = {\r\n        ...form,\r\n        email: form.email.trim().toLowerCase(),\r\n        phone: form.phone.trim(),\r\n      };\r\n      const res = await axios.post(\"/api/auth/register/customer\", payload);\r\n      const { token, data } = res.data ?? {};\r\n      const customer = data?.customer ?? res.data?.customer;\r\n      if (token) {\r\n        localStorage.setItem(\"token\", token);\r\n      }\r\n      if (customer) {\r\n        const fullName = [customer.firstName, customer.lastName].filter(Boolean).join(\" \").trim();\r\n        const displayName = fullName || customer.email || \"\";\r\n        if (displayName) {\r\n          localStorage.setItem(\"customerName\", displayName);\r\n        } else {\r\n          localStorage.removeItem(\"customerName\");\r\n        }\r\n      } else {\r\n        localStorage.removeItem(\"customerName\");\r\n      }\r\n      window.dispatchEvent(new Event(\"storage\"));\r\n      \r\n      // Check if there's a redirect parameter\r\n      const redirectPath = searchParams.get(\"redirect\");\r\n      if (redirectPath) {\r\n        router.push(redirectPath);\r\n      } else {\r\n        router.push(\"/\");\r\n      }\r\n    } catch (err: unknown) {\r\n      if (axios.isAxiosError(err)) {\r\n        setError(err.response?.data?.message ?? \"Registration failed\");\r\n      } else {\r\n        setError(\"Registration failed\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-register-wrapper\">\r\n      <div className=\"auth-register-brand\">\r\n        <div className=\"auth-register-brand-content\">\r\n          <div className=\"auth-register-logo\">\r\n            <div className=\"auth-register-logo-icon\">FD</div>\r\n            <h1 className=\"auth-register-logo-text\">FoodDelivery</h1>\r\n          </div>\r\n          <h2 className=\"auth-register-brand-title\">Start Your Journey With Us</h2>\r\n          <p className=\"auth-register-brand-subtitle\">\r\n            Create an account to order from your favorite restaurants, track deliveries in real time, and enjoy member-only perks.\r\n          </p>\r\n\r\n          <ul className=\"auth-register-benefits\">\r\n            <li>\r\n              <span className=\"auth-register-benefits-bullet\" aria-hidden=\"true\">\r\n                +\r\n              </span>\r\n              <span>Personalized restaurant suggestions crafted for you</span>\r\n            </li>\r\n            <li>\r\n              <span className=\"auth-register-benefits-bullet\" aria-hidden=\"true\">\r\n                +\r\n              </span>\r\n              <span>Faster checkout with saved addresses and payment methods</span>\r\n            </li>\r\n            <li>\r\n              <span className=\"auth-register-benefits-bullet\" aria-hidden=\"true\">\r\n                +\r\n              </span>\r\n              <span>Exclusive offers, loyalty rewards, and seasonal bundles</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"auth-register-form-side\">\r\n        <div className=\"auth-register-form-container\">\r\n          <div className=\"auth-register-back-link\">\r\n            <Link href=\"/\" className=\"auth-register-back-btn\">\r\n              Back to Home\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"auth-register-form-header\">\r\n            <h2>Create Account</h2>\r\n            <p>Fill in your details to get started</p>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"auth-register-error\" role=\"alert\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"auth-register-form\">\r\n            <div className=\"auth-register-grid\">\r\n              <div className=\"auth-register-input-group\">\r\n                <label htmlFor=\"firstName\">First Name</label>\r\n                <input\r\n                  id=\"firstName\"\r\n                  name=\"firstName\"\r\n                  type=\"text\"\r\n                  placeholder=\"Enter your first name\"\r\n                  onChange={handleChange}\r\n                  value={form.firstName}\r\n                  required\r\n                  autoComplete=\"given-name\"\r\n                />\r\n              </div>\r\n              <div className=\"auth-register-input-group\">\r\n                <label htmlFor=\"lastName\">Last Name</label>\r\n                <input\r\n                  id=\"lastName\"\r\n                  name=\"lastName\"\r\n                  type=\"text\"\r\n                  placeholder=\"Enter your last name\"\r\n                  onChange={handleChange}\r\n                  value={form.lastName}\r\n                  required\r\n                  autoComplete=\"family-name\"\r\n                />\r\n              </div>\r\n              <div className=\"auth-register-input-group\">\r\n                <label htmlFor=\"email\">Email Address</label>\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  placeholder=\"Enter your email\"\r\n                  onChange={handleChange}\r\n                  value={form.email}\r\n                  required\r\n                  autoComplete=\"email\"\r\n                />\r\n              </div>\r\n              <div className=\"auth-register-input-group\">\r\n                <label htmlFor=\"phone\">Phone Number</label>\r\n                <input\r\n                  id=\"phone\"\r\n                  name=\"phone\"\r\n                  type=\"tel\"\r\n                  placeholder=\"Enter your phone number\"\r\n                  onChange={handleChange}\r\n                  value={form.phone}\r\n                  required\r\n                  autoComplete=\"tel\"\r\n                />\r\n              </div>\r\n              <div className=\"auth-register-input-group auth-register-password-group\">\r\n                <label htmlFor=\"password\">Password</label>\r\n                <div className=\"auth-register-password-wrapper\">\r\n                  <input\r\n                    id=\"password\"\r\n                    name=\"password\"\r\n                    type={showPassword ? \"text\" : \"password\"}\r\n                    placeholder=\"Create a secure password\"\r\n                    onChange={handleChange}\r\n                    value={form.password}\r\n                    required\r\n                    autoComplete=\"new-password\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"auth-register-password-toggle\"\r\n                    onClick={() => setShowPassword((prev) => !prev)}\r\n                    aria-label={showPassword ? \"Hide password\" : \"Show password\"}\r\n                  >\r\n                    {showPassword ? \"Hide\" : \"Show\"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"auth-register-input-group\">\r\n                <label htmlFor=\"location\">Delivery Location</label>\r\n                <input\r\n                  id=\"location\"\r\n                  name=\"location\"\r\n                  type=\"text\"\r\n                  placeholder=\"City or neighborhood\"\r\n                  onChange={handleChange}\r\n                  value={form.location}\r\n                  autoComplete=\"address-level2\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"auth-register-helper\">\r\n              By creating an account you agree to our{\" \"}\r\n              <Link href=\"/legal/terms\" className=\"auth-register-link\">\r\n                Terms of Service\r\n              </Link>{\" \"}\r\n              and{\" \"}\r\n              <Link href=\"/legal/privacy\" className=\"auth-register-link\">\r\n                Privacy Policy\r\n              </Link>\r\n              .\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"auth-register-submit-btn\" disabled={isLoading}>\r\n              {isLoading ? \"Creating account...\" : \"Create Account\"}\r\n            </button>\r\n          </form>\r\n\r\n          <p className=\"auth-register-login-link\">\r\n            Already have an account?{\" \"}\r\n            <Link \r\n              href={`/auth/login${searchParams.get(\"redirect\") ? `?redirect=${searchParams.get(\"redirect\")}` : \"\"}`} \r\n              className=\"auth-register-link\"\r\n            >\r\n              Sign in here\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthRegister;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}