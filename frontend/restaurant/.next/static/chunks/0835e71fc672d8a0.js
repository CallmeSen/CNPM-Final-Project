(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,a,s)=>{a.exports=e.r(76562)},41470,e=>{"use strict";e.s(["default",()=>t]);var a=e.i(43476),s=e.i(71645),r=e.i(18566);let t=function(e){let{activeKey:t,userName:i=""}=e,l=(0,r.useRouter)(),n=(0,s.useMemo)(()=>[{key:"profile",label:"Profile",icon:"ğŸ‘¤",path:"/dashboard"},{key:"foodItems",label:"Food Items",icon:"ğŸ½ï¸",path:"/food-items"},{key:"availability",label:"Availability",icon:"ğŸ“…",path:"/availability"},{key:"orders",label:"Orders",icon:"ğŸ“¦",path:"/orders"},{key:"reports",label:"Reports",icon:"ğŸ“Š",path:"/reports"}],[]),o=(0,s.useCallback)(e=>{e.path&&l.push(e.path)},[l]),d=(0,s.useCallback)(()=>{localStorage.removeItem("token"),l.push("/")},[l]);return(0,a.jsxs)("aside",{className:"restaurant-sidebar",children:[(0,a.jsxs)("div",{className:"sidebar-header",children:[i&&(0,a.jsxs)("div",{className:"sidebar-user-greeting",children:[(0,a.jsx)("span",{className:"greeting-text",children:"Hello,"}),(0,a.jsx)("span",{className:"user-name",children:i}),(0,a.jsx)("span",{className:"greeting-emoji",children:"ğŸ‘‹"})]}),(0,a.jsxs)("div",{className:"sidebar-brand",children:[(0,a.jsx)("div",{className:"sidebar-logo",children:"ğŸ½ï¸"}),(0,a.jsxs)("div",{className:"sidebar-brand-text",children:[(0,a.jsx)("h2",{className:"sidebar-title",children:"Restaurant Hub"}),(0,a.jsx)("p",{className:"sidebar-tagline",children:"Manage your restaurant"})]})]})]}),(0,a.jsx)("nav",{className:"sidebar-nav",children:n.map(e=>(0,a.jsxs)("button",{type:"button",className:"sidebar-nav-item ".concat(t===e.key?"active":""),onClick:()=>o(e),children:[(0,a.jsx)("span",{className:"nav-item-icon",children:e.icon}),(0,a.jsx)("span",{className:"nav-item-label",children:e.label})]},e.key))}),(0,a.jsx)("div",{className:"sidebar-footer",children:(0,a.jsxs)("button",{type:"button",className:"sidebar-logout-btn",onClick:d,children:[(0,a.jsx)("span",{className:"logout-icon",children:"ğŸšª"}),(0,a.jsx)("span",{children:"Log out"})]})})]})}},96787,e=>{"use strict";e.s(["default",()=>o],96787);var a=e.i(43476),s=e.i(71645),r=e.i(18566),t=e.i(41470);let i=["Pending","Confirmed","Preparing","Out for Delivery","Delivered","Canceled"],l={Pending:{color:"#ff9800",label:"Pending"},Paid:{color:"#4CAF50",label:"Paid"},Failed:{color:"#f44336",label:"Failed"}},n=function(){(0,r.useRouter)();let[e,n]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[c,h]=(0,s.useState)("all"),[u,m]=(0,s.useState)(""),p=(0,s.useCallback)(async()=>{try{let e=localStorage.getItem("token"),a=await fetch("http://localhost:5002/api/restaurant/profile",{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();m(e.name)}}catch(e){console.error("Error fetching profile:",e)}},[]),j=(0,s.useCallback)(async()=>{try{let e=localStorage.getItem("token"),a=await fetch("http://localhost:5005/api/orders",{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Failed to fetch orders");let s=await a.json();n(s)}catch(e){console.error("Error fetching orders:",e)}finally{d(!1)}},[]);(0,s.useEffect)(()=>{p(),j()},[p,j]);let x=async(e,a)=>{try{let s=localStorage.getItem("token");if(!(await fetch("http://localhost:5005/api/orders/".concat(e,"/status"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({status:a})})).ok)throw Error("Failed to update order status");await j()}catch(e){console.error("Error updating order:",e),alert("Failed to update order status")}},b=async(e,a)=>{try{let s=localStorage.getItem("token");if(!(await fetch("http://localhost:5005/api/orders/".concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:a})})).ok)throw Error("Failed to update payment status");await j()}catch(e){console.error("Error updating payment:",e),alert("Failed to update payment status")}},g=(0,s.useMemo)(()=>"all"===c?e:"pending"===c?e.filter(e=>"Pending"===e.status):"confirmed"===c?e.filter(e=>"Confirmed"===e.status):"delivered"===c?e.filter(e=>"Delivered"===e.status):e,[e,c]),v=(0,s.useMemo)(()=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}),[]);return(0,a.jsxs)("div",{className:"dashboard-container orders-dashboard",children:[(0,a.jsx)(t.default,{activeKey:"orders",userName:u}),(0,a.jsx)("div",{className:"dashboard-content orders-content",children:(0,a.jsxs)("div",{className:"orders-container",children:[(0,a.jsxs)("div",{className:"orders-header",children:[(0,a.jsxs)("div",{className:"orders-title",children:[(0,a.jsx)("h1",{children:"Restaurant Orders"}),(0,a.jsx)("p",{children:"Manage and track all your restaurant orders"})]}),(0,a.jsx)("button",{className:"btn-refresh",onClick:j,children:"ğŸ”„ Refresh"})]}),(0,a.jsxs)("div",{className:"filters-section",children:[(0,a.jsxs)("button",{className:"filter-btn ".concat("all"===c?"active":""),onClick:()=>h("all"),children:["All (",e.length,")"]}),(0,a.jsxs)("button",{className:"filter-btn ".concat("pending"===c?"active":""),onClick:()=>h("pending"),children:["Pending (",e.filter(e=>"Pending"===e.status).length,")"]}),(0,a.jsxs)("button",{className:"filter-btn ".concat("confirmed"===c?"active":""),onClick:()=>h("confirmed"),children:["Confirmed (",e.filter(e=>"Confirmed"===e.status).length,")"]}),(0,a.jsxs)("button",{className:"filter-btn ".concat("delivered"===c?"active":""),onClick:()=>h("delivered"),children:["Delivered (",e.filter(e=>"Delivered"===e.status).length,")"]})]}),o?(0,a.jsx)("div",{className:"loading-state",children:"Loading orders..."}):0===g.length?(0,a.jsx)("div",{className:"empty-state",children:(0,a.jsx)("p",{children:"ğŸ“¦ No orders found"})}):(0,a.jsx)("div",{className:"orders-list",children:g.map(e=>{var s;return(0,a.jsxs)("div",{className:"order-card",children:[(0,a.jsxs)("div",{className:"order-header",children:[(0,a.jsxs)("div",{className:"order-info",children:[(0,a.jsxs)("h3",{children:["Order #",e._id.slice(-8)]}),(0,a.jsx)("span",{className:"order-date",children:new Date(e.createdAt).toLocaleString("vi-VN")})]}),(0,a.jsxs)("div",{className:"order-badges",children:[(0,a.jsx)("span",{className:"badge payment-badge",style:{background:(null==(s=l[e.paymentStatus])?void 0:s.color)||"#999"},children:e.paymentStatus}),(0,a.jsx)("span",{className:"badge status-badge",children:e.status})]})]}),(0,a.jsxs)("div",{className:"order-details",children:[(0,a.jsxs)("div",{className:"order-items",children:[(0,a.jsx)("strong",{children:"Items:"}),(0,a.jsx)("ul",{children:e.items.map((e,s)=>(0,a.jsxs)("li",{children:[e.quantity,"x - ",v.format(e.price)]},s))})]}),(0,a.jsxs)("div",{className:"order-info-row",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Delivery Address:"}),(0,a.jsx)("p",{children:e.deliveryAddress})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total:"}),(0,a.jsx)("p",{className:"order-total",children:v.format(e.totalPrice)})]})]})]}),(0,a.jsxs)("div",{className:"order-actions",children:[(0,a.jsxs)("div",{className:"action-group",children:[(0,a.jsx)("label",{children:"Order Status:"}),(0,a.jsx)("select",{value:e.status,onChange:a=>x(e._id,a.target.value),className:"status-select",children:i.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),"Paid"!==e.paymentStatus&&(0,a.jsx)("button",{className:"btn-mark-paid",onClick:()=>b(e._id,"Paid"),children:"Mark as Paid"})]})]},e._id)})})]})})]})};function o(){return(0,a.jsx)(n,{})}}]);